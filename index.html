<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="robots" content="noindex, nofollow" />
  <title>EnginueCore – Instant Alpine Linux Terminal</title>
  <style>
    body{margin:0;background:#000;color:#0f0;font:18px monospace;overflow:hidden}
    #screen{height:100vh;display:flex;flex-direction:column;background:#000}
    canvas{flex:1;background:#000}
    #console{height:200px;overflow:auto;background:#111;padding:10px;color:#0f0;font:16px monospace}
    .top{background:#000;color:#0f0;padding:15px;text-align:center;font-weight:bold;position:fixed;top:0;left:0;right:0;z-index:99;border-bottom:2px solid #0f0}
    button{background:#0f0;color:#000;border:none;padding:12px 24px;margin:10px;font-weight:bold;cursor:pointer}
    #start{background:#0f0;color:#000;padding:20px;font-size:20px;border:none;cursor:pointer}
  </style>
</head>
<body>

<div class="top">
  EnginueCore – <span id="status">Ready</span>
   <button onclick="document.getElementById('plans').style.display = 
    document.getElementById('plans').style.display === 'none' ? 'flex' : 'none'">
    Upgrade to PRO
 </button>
  <div class="plans" id="plans" style="display: flex;justify-content: space-evenly;">
  <div class="plan">
    <h3>Pro</h3>
    <div class="price">$19<span style="font-size:16px">/mo</span></div>
    <ul style="text-align:left">
      <li>4 GB RAM</li>
      <li>20 GB disk</li>
      <li>Real Docker + Portainer</li>
      <li>yourname.enginuecore.com</li>
    </ul>
    <button onclick="upgrade('pro')">Upgrade to Pro</button>
  </div>

  <div class="plan">
    <h3>Power User</h3>
    <div class="price">$49<span style="font-size:16px">/mo</span></div>
    <ul style="text-align:left">
      <li>8 GB RAM</li>
      <li>80 GB disk</li>
      <li>Unlimited containers</li>
      <li>SSL + custom domain</li>
    </ul>
    <button onclick="upgrade('power')">Get Power User</button>
  </div>

  <div class="plan">
    <h3>Web Hosting</h3>
    <div class="price">$99<span style="font-size:16px">/mo</span></div>
    <ul style="text-align:left">
      <li>12 GB RAM</li>
      <li>200 GB disk</li>
      <li>Nginx + Node.js pre-installed</li>
      <li>Unlimited subdomains</li>
    </ul>
    <button onclick="upgrade('hosting')">Start Hosting</button>
  </div>

  <div class="plan">
    <h3>Production SaaS</h3>
    <div class="price">$199<span style="font-size:16px">/mo</span></div>
    <ul style="text-align:left">
      <li>16–32 GB RAM</li>
      <li>500 GB–1 TB disk</li>
      <li>Auto-scale + backups</li>
      <li>Your own domain (CNAME)</li>
    </ul>
    <button onclick="upgrade('production')">Go Production</button>
  </div>
</div>
</div>

<div id="screen">
  <div style="flex:1;display:flex;align-items:center;justify-content:center;background:#000">
    <button id="start">CLICK TO START ALPINE LINUX</button>
  </div>
  <div id="console"></div>
</div>


<script src="https://enginuecore.com/build/libv86.js"></script>
<script>
let emulator = null;
const isPro = localStorage.getItem('alpine_pro') === 'true';
document.getElementById('status').textContent = isPro ? "Pro user – 4 GB RAM" : "Free tier – 512 MB RAM";

document.getElementById('start').onclick = function() {
  this.style.display = 'none';  // Hide button

  const screenDiv = document.getElementById('screen');
const canvas = document.createElement('canvas');
canvas.id = 'vga-canvas';
canvas.width = window.innerWidth;
canvas.height = window.innerHeight - 200;  
screenDiv.insertBefore(canvas, screenDiv.firstChild);  

  emulator = new V86({
    screen_container: screenDiv, 
    wasm_url: "https://enginuecore.com/build/v86.wasm",
    memory_size: isPro ? 4*1024*1024*1024 : 512*1024*1024,
    bios: { url: "https://enginuecore.com/build/seabios.bin" },
    vga_bios: { url: "https://enginuecore.com/build/vgabios.bin" },
    cdrom: { url: "https://enginuecore.com/build/alpine-virt-3.22.2-x86.iso" },
    autostart: true,
    disable_speaker: true,    
    disable_mouse: true
  });

  // Serial output
  emulator.add_listener("serial0-output-char", c => {
    document.getElementById('console').append(c);
    document.getElementById('console').scrollTop = document.getElementById('console').scrollHeight;
  });
};

// Allow typing after start
document.addEventListener('keydown', function(e) {
  if (emulator) {
    if (e.key.length === 1) emulator.serial0_send(e.key.charCodeAt(0));
    else if (e.key === 'Enter') emulator.serial0_send(13);
    else if (e.key === 'Backspace') emulator.serial0_send(127);
    e.preventDefault();
  }
});

async function upgrade(plan) {
  const r = await fetch(`https://alpineworker.meoasis2014.workers.dev/checkout?plan=${plan}`, {
    method: 'POST'
  });
  const d = await r.json();
  if (d.url) location.href = d.url;
  else alert("Error: " + JSON.stringify(d));
}

// Unlock Pro after payment (for later)
if (localStorage.getItem('alpine_pro') === 'true') {
  const userId = localStorage.getItem('user_id');
  if (userId) {
    alert('Your Pro terminal: https://' + userId + '.enginuecore.com');
  }
}
</script>
</body>
</html>
